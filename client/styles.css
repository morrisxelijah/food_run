/* =========================================================
   THEME TOKENS  (light mode default)
   ========================================================= */

:root {
    /* palette (matches your portfolio site) */
    --bg: #ffffff;
    --primary: #222222;
    --secondary: #09a57c;
    --accent: #0077cc;
    --muted: #f5f5f5;

    /* dark palette */
    --dark-bg: #121929;
    --dark-primary: #d5d5d5;
    --dark-secondary: #02f1a1cd;
    --dark-accent: #00c8ff;
    --dark-muted: #0c101b;

    /* derived (light defaults) */
    --color-bg: var(--bg);
    --color-surface: #ffffff;
    --color-surface-muted: var(--muted);
    --color-text: var(--primary);
    --color-text-soft: #666666;
    --color-border: rgba(0, 0, 0, 0.12);
    --color-error: #e63946;
    --color-error-soft: rgba(230, 57, 70, 0.1);
    --color-success: #2a9d8f;
    --color-success-soft: rgba(42, 157, 143, 0.1);

    /* spacing + radius (mobile-first, proportional) */
    --space-xs: min(0.5vh, 1.2vw);
    --space-sm: min(1vh, 2.5vw);
    --space-md: min(2vh, 4vw);
    --space-lg: min(3vh, 6vw);

    --radius-sm: min(0.6rem, 3vw);
    --radius-md: min(0.9rem, 4vw);
    --radius-lg: min(1.2rem, 5vw);

    /* typography */
    --font-body: 'Comic Sans MS', "Comic Mono", "Comic Code", ui-monospace, SFMono-Regular,
        Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;

    --font-size-base: clamp(0.9rem, 0.4vw + 0.8rem, 1rem);
    --font-size-small: clamp(0.78rem, 0.3vw + 0.7rem, 0.9rem);
    --font-size-h1: clamp(1.5rem, 0.8vw + 1.2rem, 2rem);
    --font-size-h2: clamp(1.25rem, 0.6vw + 1rem, 1.6rem);
}

/* dark theme overrides (apply data-theme="dark" on html or body later) */
:root[data-theme="dark"],
body[data-theme="dark"] {
    --color-bg: var(--dark-bg);
    --color-surface: #161e30;
    --color-surface-muted: var(--dark-muted);
    --color-text: var(--dark-primary);
    --color-text-soft: #a3a3a3;
    --color-border: rgba(255, 255, 255, 0.16);
}

/* =========================================================
   RESET + BASE
   ========================================================= */

*,
*::before,
*::after {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
}

html,
body {
    min-height: 100vh;
}

body {
    background: var(--color-bg);
    color: var(--color-text);
    font-family: var(--font-body);
    font-size: var(--font-size-base);
    line-height: 1.5;
    padding: var(--space-md);
    transition:
        background-color 0.3s ease,
        color 0.3s ease;
    overflow-x: hidden;
    /* avoid horizontal scrollbars */
}

img,
svg {
    max-inline-size: 100%;
    block-size: auto;
}

h1,
h2 {
    font-weight: 700;
}

h1 {
    font-size: var(--font-size-h1);
}

h2 {
    font-size: var(--font-size-h2);
}

p {
    margin-block: var(--space-xs);
}

a {
    color: var(--accent);
    text-decoration: none;
}

a:hover,
a:focus-visible {
    text-decoration: underline;
}

/* =========================================================
   APP LAYOUT
   ========================================================= */

.app-root {
    width: 100%;
    max-width: min(96vw, 64rem);
    /* grow with screen, keep a buffer */
    margin-inline: auto;
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    gap: var(--space-md);
    padding: var(--space-md);
    border-radius: var(--radius-lg);
    background: var(--color-surface);
    border: 0.08rem solid var(--color-border);
}

/* header with app title */
.app-header {
    padding-block-end: var(--space-sm);
    border-bottom: 0.08rem solid var(--color-border);
    text-align: center;
}

.app-title {
    /* roughly 2Ã— the page heading size */
    font-size: calc(2 * var(--font-size-h2));
    color: var(--secondary);
    /* green */
    font-style: italic;
    /* italicized */
}

/* page-level headings like "Import Recipes" */
section>h1 {
    font-size: var(--font-size-h2);
}

/* main content area */
.app-main {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: var(--space-md);
}

/* top bar = server status + nav
   server status stacked above nav (always) */
.app-top-bar {
    display: flex;
    flex-direction: column;
    gap: var(--space-sm);
    padding: var(--space-sm);
    border-radius: var(--radius-md);
    background: var(--color-surface-muted);
    border: 0.08rem solid var(--color-border);
}

/* ensure server status appears above nav without changing JSX */
.server-status {
    order: 1;
}

.app-nav {
    order: 2;
}

/* =========================================================
   NAVIGATION
   ========================================================= */

.app-nav {
    display: flex;
    flex-direction: row;
    flex-wrap: nowrap;
    width: 100%;
    /* stretch across app width */
    gap: var(--space-xs);
}

/* nav buttons: equal width, no horizontal scroll, text can wrap */
.nav-button {
    flex: 1 1 0;
    min-inline-size: 0;
    /* allow shrinking evenly */
    padding-block: var(--space-xs);
    padding-inline: var(--space-sm);
    border-radius: var(--radius-sm);
    border: 0.08rem solid var(--accent);
    /* blue border when inactive */
    background: var(--color-surface);
    color: var(--accent);
    /* blue text when inactive */
    font-size: var(--font-size-small);
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.06em;
    cursor: pointer;
    white-space: normal;
    /* wrap label text instead of expanding width */
    text-align: center;
}

.nav-button:hover,
.nav-button:focus-visible {
    outline: none;
    background: var(--color-surface-muted);
}

/* active: blue background, green text + outline, bold */
.nav-button--active {
    /* softer blue to keep contrast with green text */
    background: var(--secondary);
    border-color: var(--accent);
    /* green outline */
    border-width: 0.12rem;
    color: var(--bg);
    /* green text */
    font-weight: 700;
}

/* keep hover from fighting the active styles */
.nav-button--active:hover,
.nav-button--active:focus-visible {
    background: color-mix(in srgb, var(--accent) 50%, transparent);
}

/* =========================================================
   SERVER STATUS PILL
   ========================================================= */

.server-status {
    align-self: flex-start;
    padding-block: calc(var(--space-xs) * 0.7);
    padding-inline: var(--space-sm);
    border-radius: 999rem;
    font-size: var(--font-size-small);
    letter-spacing: 0.06em;
    text-transform: uppercase;
    display: inline-flex;
    align-items: center;
    gap: 0.5ch;
    border: 0.08rem solid transparent;
}

.server-status::before {
    content: "";
    inline-size: 0.6rem;
    block-size: 0.6rem;
    border-radius: 999rem;
}

/* unknown */
.server-status--unknown {
    background: rgba(102, 102, 102, 0.08);
    color: var(--color-text-soft);
    border-color: rgba(102, 102, 102, 0.4);
}

.server-status--unknown::before {
    background: #fbbf24;
}

/* ok */
.server-status--ok {
    background: var(--color-success-soft);
    color: var(--color-success);
    border-color: rgba(42, 157, 143, 0.6);
}

.server-status--ok::before {
    background: var(--color-success);
}

/* error */
.server-status--error {
    background: var(--color-error-soft);
    color: var(--color-error);
    border-color: rgba(230, 57, 70, 0.7);
}

.server-status--error::before {
    background: var(--color-error);
}

/* =========================================================
   SECTIONS (pages)
   ========================================================= */

section {
    display: flex;
    flex-direction: column;
    gap: var(--space-sm);
    padding: var(--space-md);
    border-radius: var(--radius-lg);
    background: var(--color-surface);
    border: 0.08rem solid var(--color-border);
}

section>p {
    color: var(--color-text-soft);
    font-size: var(--font-size-base);
}

/* =========================================================
   FORM BASICS
   ========================================================= */

input,
button {
    font-family: inherit;
}

input[type="text"],
input[type="url"],
input[type="number"] {
    inline-size: 100%;
    padding-block: var(--space-xs);
    padding-inline: var(--space-sm);
    border-radius: var(--radius-sm);
    border: 0.08rem solid var(--color-border);
    background: var(--color-surface);
    color: var(--color-text);
    font-size: var(--font-size-base);
}

input::placeholder {
    color: var(--color-text-soft);
}

input:focus-visible {
    outline: none;
    border-color: var(--accent);
}

/* generic button base (override colors per context) */
button {
    border-radius: var(--radius-sm);
    border: 0.08rem solid transparent;
    padding-block: var(--space-xs);
    padding-inline: var(--space-md);
    font-weight: 600;
    font-size: var(--font-size-base);
    cursor: pointer;
    background: var(--accent);
    color: #ffffff;
}

button:disabled {
    opacity: 0.6;
    cursor: default;
}

/* =========================================================
   IMPORT PAGE
   ========================================================= */

.import-form {
    display: grid;
    gap: var(--space-sm);
    padding: var(--space-sm);
    border-radius: var(--radius-md);
    background: var(--color-surface-muted);
}

.import-form__field {
    display: flex;
    flex-direction: column;
    gap: calc(var(--space-xs) * 0.5);
    font-size: var(--font-size-small);
    text-transform: uppercase;
    letter-spacing: 0.06em;
    color: var(--color-text-soft);
}

.import-form__field span {
    font-weight: 600;
}

.import-form__parse-button {
    background: var(--accent);
    border-color: var(--accent);
}

/* parse error */
.import-form__error {
    margin-block-start: var(--space-xs);
    padding: var(--space-xs) var(--space-sm);
    border-radius: var(--radius-sm);
    background: var(--color-error-soft);
    color: var(--color-error);
    font-size: var(--font-size-small);
}

/* ingredient editor */
.import-ingredients {
    margin-block-start: var(--space-md);
    display: flex;
    flex-direction: column;
    gap: var(--space-sm);
    padding: var(--space-sm);
    border-radius: var(--radius-md);
    background: var(--color-surface-muted);
}

.import-ingredients>p {
    color: var(--color-text-soft);
    font-size: var(--font-size-small);
}

.import-ingredients__rows {
    display: flex;
    flex-direction: column;
    gap: var(--space-xs);
}

/* single ingredient row */
.import-ingredients__row {
    display: grid;
    grid-template-columns: 1.8fr 1fr 1fr auto;
    gap: var(--space-xs);
    align-items: center;
    padding: var(--space-xs);
    border-radius: var(--radius-md);
    background: var(--color-surface);
    border: 0.08rem solid var(--color-border);
}

.import-ingredients__field {
    display: flex;
    flex-direction: column;
    gap: calc(var(--space-xs) * 0.3);
    font-size: var(--font-size-small);
    text-transform: uppercase;
    letter-spacing: 0.06em;
    color: var(--color-text-soft);
}

.import-ingredients__field input {
    font-size: var(--font-size-base);
}

/* remove ingredient button */
.import-ingredients__remove {
    background: transparent;
    color: var(--color-error);
    border-color: var(--color-error);
    font-size: var(--font-size-small);
    padding-inline: var(--space-sm);
    padding-block: calc(var(--space-xs) * 0.7);
}

.import-ingredients__remove:hover {
    background: var(--color-error-soft);
}

/* add ingredient */
.import-ingredients__add {
    margin-block-start: var(--space-xs);
    background: var(--accent);
    border-color: var(--secondary);
    color: #ffffff;
    font-size: var(--font-size-small);
    padding-inline: var(--space-sm);
}

/* save form (bottom) */
.import-save-form {
    margin-block-start: var(--space-sm);
    display: flex;
    flex-direction: column;
    gap: var(--space-xs);
}

.import-save-form__error {
    padding: var(--space-xs) var(--space-sm);
    border-radius: var(--radius-sm);
    background: var(--color-error-soft);
    color: var(--color-error);
    font-size: var(--font-size-small);
}

.import-save-form__success {
    padding: var(--space-xs) var(--space-sm);
    border-radius: var(--radius-sm);
    background: var(--color-success-soft);
    color: var(--color-success);
    font-size: var(--font-size-small);
}

.import-save-form__submit {
    align-self: flex-start;
    background: var(--secondary);
    border-color: var(--secondary);
}

/* =========================================================
   RECIPES PAGE
   ========================================================= */

.recipes-layout {
    margin-block-start: var(--space-xs);
}

.recipes-error-text {
    padding: var(--space-xs) var(--space-sm);
    border-radius: var(--radius-sm);
    background: var(--color-error-soft);
    color: var(--color-error);
    font-size: var(--font-size-small);
}

.recipe-list {
    list-style: none;
    display: flex;
    flex-direction: column;
    gap: var(--space-sm);
}

/* single recipe card */
.recipe-list-item {
    padding: var(--space-sm);
    border-radius: var(--radius-md);
    background: var(--color-surface-muted);
    border: 0.08rem solid var(--color-border);
    display: flex;
    flex-direction: column;
    gap: calc(var(--space-xs) * 0.8);
}

.recipe-list-item__title {
    font-size: var(--font-size-h2);
}

.recipe-list-item__meta {
    font-size: var(--font-size-small);
    color: var(--color-text-soft);
}

.recipe-list-item__source {
    font-size: var(--font-size-small);
    color: var(--accent);
    word-break: break-all;
}

/* view/hide ingredients button */
.recipe-list-item__details-button {
    align-self: flex-start;
    background: var(--accent);
    border-color: var(--accent);
    color: #ffffff;
    font-size: var(--font-size-small);
    padding-inline: var(--space-sm);
}

/* details panel */
.recipe-list-item__details {
    margin-block-start: var(--space-xs);
    padding: var(--space-xs) var(--space-sm);
    border-radius: var(--radius-md);
    background: var(--color-surface);
    border: 0.08rem solid var(--color-border);
}

/* ingredients list */
.recipe-ingredients-list {
    list-style: none;
    display: flex;
    flex-direction: column;
    gap: calc(var(--space-xs) * 0.6);
    margin-block-start: var(--space-xs);
}

.recipe-ingredients-list__item {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5ch;
}

.recipe-ingredients-list__name {
    font-weight: 600;
}

.recipe-ingredients-list__meta {
    color: var(--color-text-soft);
}

/* =========================================================
   PLANNER + SHOPPING PAGES
   ========================================================= */

section>p+p {
    font-size: var(--font-size-small);
}

/* =========================================================
   LARGER SCREENS
   ========================================================= */

@media (min-width: 48rem) {
    .app-root {
        padding: var(--space-lg);
    }

    section {
        padding: var(--space-lg);
    }

    .import-form {
        grid-template-columns: 1.4fr 1.2fr;
        gap: var(--space-md);
    }

    .import-form h2 {
        grid-column: 1 / -1;
    }

    .import-form__parse-button {
        grid-column: 1 / -1;
        /* span full width */
        justify-self: center;
        /* center in the form */
    }

    .recipe-list {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(18rem, 1fr));
        gap: var(--space-md);
    }
}